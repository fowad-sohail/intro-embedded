


ARM Macro Assembler    Page 1 


    1 00000000         ; Port 1 Pin Direction Register
    2 00000000 40004C04 
                       P1DIR   EQU              0x40004C04
    3 00000000         ; Port 1 Pin Output Register
    4 00000000 40004C02 
                       P1OUT   EQU              0x40004C02
    5 00000000 40004C00 
                       P1IN    EQU              0x40004C00
    6 00000000         
    7 00000000 40004C05 
                       P2DIR   EQU              0x40004C05
    8 00000000 40004C03 
                       P2OUT   EQU              0x40004C03
    9 00000000 40004C01 
                       P2IN    EQU              0x40004C01
   10 00000000         
   11 00000000 00000040 
                       FLAmask EQU              0x40        ; bitmask P2.6
   12 00000000 00000002 
                       TSTmask EQU              0x2         ; bitmask P1.1
   13 00000000 00000010 
                       YELLOWmask
                               EQU              0x10        ; bitmask P2.4
   14 00000000         
   15 00000000         
   16 00000000                 THUMB
   17 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   18 00000000                 EXPORT           asm_main
   19 00000000         
   20 00000000         asm_main
   21 00000000         ; make P1.0 an output pin
   22 00000000 4832            LDR              R0, =P2DIR  ; load Dir Reg in R
                                                            1
   23 00000002 7801            LDRB             R1, [R0]
   24 00000004 F041 0117       ORR              R1, #23     ; set bit 0
   25 00000008 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
   26 0000000A         
   27 0000000A 4831            LDR              R0, =P1DIR  ; load Dir Reg in R
                                                            1
   28 0000000C 7801            LDRB             R1, [R0]
   29 0000000E F041 0117       ORR              R1, #23     ; set bit 0
   30 00000012 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
   31 00000014         
   32 00000014         loop
   33 00000014 F000 F852       BL               allOFF
   34 00000018         
   35 00000018         ; STATE B
   36 00000018 F000 F80F       BL               stateB
   37 0000001C         
   38 0000001C         
   39 0000001C         
   40 0000001C E7FA            B                loop        ; repeat the loop
   41 0000001E         
   42 0000001E         ;-------------------------------------------------------
                       ------------------------
   43 0000001E         ; STATES



ARM Macro Assembler    Page 2 


   44 0000001E         stateA
   45 0000001E F000 F823       BL               greenON
   46 00000022 F000 F82F       BL               yellowON
   47 00000026 F000 F83B       BL               redON
   48 0000002A         
   49 0000002A 482A            LDR              R0, =500000
   50 0000002C F000 F819       BL               delayMs
   51 00000030         
   52 00000030 F000 F82E       BL               yellowOFF
   53 00000034 F000 F83A       BL               redOFF
   54 00000038         
   55 00000038 E7F1            B                stateA
   56 0000003A         
   57 0000003A         
   58 0000003A         stateB
   59 0000003A F000 F815       BL               greenON
   60 0000003E F000 F827       BL               yellowOFF
   61 00000042 F000 F833       BL               redOFF
   62 00000046         
   63 00000046         ; to get to stateC
   64 00000046 4824            LDR              r0, =P2IN
   65 00000048 7801            LDRB             r1, [r0]
   66 0000004A F011 0F40       TST              r1, FLAmask
   67 0000004E D005            BEQ              stateC
   68 00000050         
   69 00000050         ; to get to stateA
   70 00000050 4822            LDR              r0, =P1IN
   71 00000052 7801            LDRB             r1, [r0]
   72 00000054 F011 0F02       TST              r1, TSTmask
   73 00000058 D0E1            BEQ              stateA
   74 0000005A         
   75 0000005A E7EE            B                stateB
   76 0000005C         
   77 0000005C         stateC
   78 0000005C F000 F820       BL               redON       ; THIS ISNT RIGHT F
                                                            OR STATE C
   79 00000060 E7FC            B                stateC
   80 00000062         
   81 00000062         ; ------------------------------------------------------
                       ------------------------
   82 00000062         ; SUBROUTINES
   83 00000062         delayMs
   84 00000062         
   85 00000062 3801    L1      SUBS             R0, #1      ; inner loop
   86 00000064 D1FD            BNE              L1
   87 00000066 4770            BX               LR
   88 00000068         
   89 00000068         greenON
   90 00000068 481D            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
   91 0000006A 7801            LDRB             R1, [R0]
   92 0000006C F041 0102       ORR              R1, #2      ; set bit 0
   93 00000070 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
   94 00000072 4770            BX               LR
   95 00000074         
   96 00000074         greenOFF
   97 00000074 481A            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1



ARM Macro Assembler    Page 3 


   98 00000076 7801            LDRB             R1, [R0]
   99 00000078 F06F 0202       MVN              R2, #2      ; load complement o
                                                            f bit 0 mask
  100 0000007C EA01 0102       AND              R1, R2      ; clear bit 0
  101 00000080 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  102 00000082 4770            BX               LR
  103 00000084         
  104 00000084         yellowON
  105 00000084 4816            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
  106 00000086 7801            LDRB             R1, [R0]
  107 00000088 F041 0110       ORR              R1, YELLOWmask
  108 0000008C 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  109 0000008E 4770            BX               LR
  110 00000090         
  111 00000090         yellowOFF
  112 00000090 4813            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
  113 00000092 7801            LDRB             R1, [R0]
  114 00000094 F06F 0210       MVN              R2, YELLOWmask ; load complemen
                                                            t of bit 0 mask
  115 00000098 EA01 0102       AND              R1, R2      ; clear bit 0
  116 0000009C 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  117 0000009E 4770            BX               LR
  118 000000A0         
  119 000000A0         redON
  120 000000A0 4810            LDR              R0, =P1OUT  ; load Output Data 
                                                            Reg in R1
  121 000000A2 7801            LDRB             R1, [R0]
  122 000000A4 F041 0101       ORR              R1, #1      ; set bit 0
  123 000000A8 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  124 000000AA 4770            BX               LR
  125 000000AC         
  126 000000AC         redOFF
  127 000000AC 480D            LDR              R0, =P1OUT  ; load Output Data 
                                                            Reg in R1
  128 000000AE 7801            LDRB             R1, [R0]
  129 000000B0 F06F 0201       MVN              R2, #1      ; load complement o
                                                            f bit 0 mask
  130 000000B4 EA01 0102       AND              R1, R2      ; clear bit 0
  131 000000B8 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  132 000000BA 4770            BX               LR
  133 000000BC         
  134 000000BC         allOFF
  135 000000BC 4808            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
  136 000000BE 7801            LDRB             R1, [R0]
  137 000000C0 F06F 0207       MVN              R2, #7      ; load complement o
                                                            f bit 0 mask
  138 000000C4 EA01 0102       AND              R1, R2      ; clear bit 0
  139 000000C8 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  140 000000CA 4770            BX               LR
  141 000000CC         



ARM Macro Assembler    Page 4 


  142 000000CC                 END
              40004C05 
              40004C04 
              0007A120 
              40004C01 
              40004C00 
              40004C03 
              40004C02 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\asm_main.d -o.\objects\asm_main.o -I.\RTE\_Target_1 -
IC:\Users\fssoh\AppData\Local\Arm\Packs\ARM\CMSIS\5.6.0\CMSIS\Core\Include -IC:
\Users\fssoh\AppData\Local\Arm\Packs\TexasInstruments\MSP432P4xx_DFP\3.2.6\Devi
ce\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 528"
 --predefine="_RTE_ SETA 1" --predefine="__MSP432P401R__ SETA 1" --list=.\listi
ngs\asm_main.lst asm_main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 17 in file asm_main.s
   Uses
      None
Comment: .text unused
L1 00000062

Symbol: L1
   Definitions
      At line 85 in file asm_main.s
   Uses
      At line 86 in file asm_main.s
Comment: L1 used once
allOFF 000000BC

Symbol: allOFF
   Definitions
      At line 134 in file asm_main.s
   Uses
      At line 33 in file asm_main.s
Comment: allOFF used once
asm_main 00000000

Symbol: asm_main
   Definitions
      At line 20 in file asm_main.s
   Uses
      At line 18 in file asm_main.s
Comment: asm_main used once
delayMs 00000062

Symbol: delayMs
   Definitions
      At line 83 in file asm_main.s
   Uses
      At line 50 in file asm_main.s
Comment: delayMs used once
greenOFF 00000074

Symbol: greenOFF
   Definitions
      At line 96 in file asm_main.s
   Uses
      None
Comment: greenOFF unused
greenON 00000068

Symbol: greenON
   Definitions
      At line 89 in file asm_main.s
   Uses
      At line 45 in file asm_main.s
      At line 59 in file asm_main.s

loop 00000014




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: loop
   Definitions
      At line 32 in file asm_main.s
   Uses
      At line 40 in file asm_main.s
Comment: loop used once
redOFF 000000AC

Symbol: redOFF
   Definitions
      At line 126 in file asm_main.s
   Uses
      At line 53 in file asm_main.s
      At line 61 in file asm_main.s

redON 000000A0

Symbol: redON
   Definitions
      At line 119 in file asm_main.s
   Uses
      At line 47 in file asm_main.s
      At line 78 in file asm_main.s

stateA 0000001E

Symbol: stateA
   Definitions
      At line 44 in file asm_main.s
   Uses
      At line 55 in file asm_main.s
      At line 73 in file asm_main.s

stateB 0000003A

Symbol: stateB
   Definitions
      At line 58 in file asm_main.s
   Uses
      At line 36 in file asm_main.s
      At line 75 in file asm_main.s

stateC 0000005C

Symbol: stateC
   Definitions
      At line 77 in file asm_main.s
   Uses
      At line 67 in file asm_main.s
      At line 79 in file asm_main.s

yellowOFF 00000090

Symbol: yellowOFF
   Definitions
      At line 111 in file asm_main.s
   Uses
      At line 52 in file asm_main.s
      At line 60 in file asm_main.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols


yellowON 00000084

Symbol: yellowON
   Definitions
      At line 104 in file asm_main.s
   Uses
      At line 46 in file asm_main.s
Comment: yellowON used once
15 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

FLAmask 00000040

Symbol: FLAmask
   Definitions
      At line 11 in file asm_main.s
   Uses
      At line 66 in file asm_main.s
Comment: FLAmask used once
P1DIR 40004C04

Symbol: P1DIR
   Definitions
      At line 2 in file asm_main.s
   Uses
      At line 27 in file asm_main.s
Comment: P1DIR used once
P1IN 40004C00

Symbol: P1IN
   Definitions
      At line 5 in file asm_main.s
   Uses
      At line 70 in file asm_main.s
Comment: P1IN used once
P1OUT 40004C02

Symbol: P1OUT
   Definitions
      At line 4 in file asm_main.s
   Uses
      At line 120 in file asm_main.s
      At line 127 in file asm_main.s

P2DIR 40004C05

Symbol: P2DIR
   Definitions
      At line 7 in file asm_main.s
   Uses
      At line 22 in file asm_main.s
Comment: P2DIR used once
P2IN 40004C01

Symbol: P2IN
   Definitions
      At line 9 in file asm_main.s
   Uses
      At line 64 in file asm_main.s
Comment: P2IN used once
P2OUT 40004C03

Symbol: P2OUT
   Definitions
      At line 8 in file asm_main.s
   Uses
      At line 90 in file asm_main.s
      At line 97 in file asm_main.s
      At line 105 in file asm_main.s
      At line 112 in file asm_main.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

      At line 135 in file asm_main.s

TSTmask 00000002

Symbol: TSTmask
   Definitions
      At line 12 in file asm_main.s
   Uses
      At line 72 in file asm_main.s
Comment: TSTmask used once
YELLOWmask 00000010

Symbol: YELLOWmask
   Definitions
      At line 13 in file asm_main.s
   Uses
      At line 107 in file asm_main.s
      At line 114 in file asm_main.s

9 symbols
361 symbols in table




ARM Macro Assembler    Page 1 


    1 00000000         ; Port 1 Pin Direction Register
    2 00000000 40004C04 
                       P1DIR   EQU              0x40004C04
    3 00000000         ; Port 1 Pin Output Register
    4 00000000 40004C02 
                       P1OUT   EQU              0x40004C02
    5 00000000 40004C00 
                       P1IN    EQU              0x40004C00
    6 00000000 40004C06 
                       P1REN   EQU              0x40004C06
    7 00000000         
    8 00000000 40004C07 
                       P2REN   EQU              0x40004C07  ; resistor enable
    9 00000000 40004C05 
                       P2DIR   EQU              0x40004C05
   10 00000000 40004C03 
                       P2OUT   EQU              0x40004C03
   11 00000000 40004C01 
                       P2IN    EQU              0x40004C01
   12 00000000         
   13 00000000 00000010 
                       YELLOWmask
                               EQU              0x10        ; bitmask P2.4
   14 00000000         
   15 00000000 00000002 
                       TSTmask EQU              0x2         ; bitmask P1.1
   16 00000000 00000010 
                       ACKmask EQU              0x10        ; bitmask P1.4
   17 00000000 00000040 
                       FLAmask EQU              0x40        ; bitmask P2.6
   18 00000000 00000080 
                       OLAmask EQU              0x80        ; bitmask P2.7
   19 00000000         
   20 00000000         
   21 00000000         
   22 00000000                 THUMB
   23 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   24 00000000                 EXPORT           asm_main
   25 00000000         
   26 00000000         asm_main
   27 00000000 485C            LDR              R0, =P2DIR
   28 00000002 7801            LDRB             R1, [R0]
   29 00000004 F041 01FF       ORR              R1, #255
   30 00000008 7001            STRB             R1, [R0]
   31 0000000A         
   32 0000000A 485B            LDR              R0, =P1DIR
   33 0000000C 7801            LDRB             R1, [R0]
   34 0000000E F041 01FF       ORR              R1, #255
   35 00000012 7001            STRB             R1, [R0]
   36 00000014         
   37 00000014 4859            LDR              R0, =P2REN  ; load Dir Reg in R
                                                            1
   38 00000016 7801            LDRB             R1, [R0]    ;
   39 00000018 F041 0140       ORR              R1, FLAmask ; set bit
   40 0000001C 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
   41 0000001E         
   42 0000001E 4858            LDR              R0, =P2OUT  ; load Dir Reg in R



ARM Macro Assembler    Page 2 


                                                            1
   43 00000020 7801            LDRB             R1, [R0]    ;
   44 00000022 F041 0140       ORR              R1, FLAmask ; set bit
   45 00000026 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
   46 00000028         
   47 00000028         loop
   48 00000028 F000 F89C       BL               allOFF
   49 0000002C         
   50 0000002C         ; start in state b
   51 0000002C F000 F817       BL               stateB
   52 00000030         
   53 00000030 E7FA            B                loop        ; repeat the loop
   54 00000032         
   55 00000032         ; STATES
   56 00000032         ;-------------------------------------------------------
                       ------------------------
   57 00000032         stateA
   58 00000032         ; to get to stateB
   59 00000032 4854            LDR              r0, =P1IN
   60 00000034 7801            LDRB             r1, [r0]
   61 00000036 F011 0F02       TST              r1, TSTmask
   62 0000003A D110            BNE              stateB
   63 0000003C         
   64 0000003C F000 F868       BL               greenON
   65 00000040 F000 F874       BL               yellowON
   66 00000044 F000 F880       BL               redON
   67 00000048         
   68 00000048 484F            LDR              R0, =500000
   69 0000004A F000 F85E       BL               delayMs
   70 0000004E         
   71 0000004E F000 F873       BL               yellowOFF
   72 00000052 F000 F87F       BL               redOFF
   73 00000056         
   74 00000056 484C            LDR              R0, =500000
   75 00000058 F000 F857       BL               delayMs
   76 0000005C         
   77 0000005C E7E9            B                stateA
   78 0000005E         ;-------------------------------------------------------
                       ------------------------
   79 0000005E         stateB
   80 0000005E F000 F857       BL               greenON
   81 00000062 F000 F869       BL               yellowOFF
   82 00000066 F000 F875       BL               redOFF
   83 0000006A         
   84 0000006A         ; to get to stateC
   85 0000006A 4848            LDR              r0, =P2IN
   86 0000006C 7801            LDRB             r1, [r0]
   87 0000006E F011 0F40       TST              r1, FLAmask
   88 00000072 D005            BEQ              stateC
   89 00000074         
   90 00000074         ; to get to stateA
   91 00000074 4843            LDR              r0, =P1IN
   92 00000076 7801            LDRB             r1, [r0]
   93 00000078 F011 0F02       TST              r1, TSTmask
   94 0000007C D0D9            BEQ              stateA
   95 0000007E         
   96 0000007E E7EE            B                stateB
   97 00000080         ;-------------------------------------------------------



ARM Macro Assembler    Page 3 


                       ------------------------
   98 00000080         stateC
   99 00000080         ; to get to stateE
  100 00000080 4842            LDR              r0, =P2IN
  101 00000082 7801            LDRB             r1, [r0]
  102 00000084 F011 0F80       TST              r1, OLAmask
  103 00000088 D01F            BEQ              stateE
  104 0000008A         
  105 0000008A         ; to get to stateD
  106 0000008A 483E            LDR              r0, =P1IN
  107 0000008C 7801            LDRB             r1, [r0]
  108 0000008E F011 0F10       TST              r1, ACKmask
  109 00000092 D00E            BEQ              stateD
  110 00000094         
  111 00000094         ; to get to stateB
  112 00000094         ; LDR r0, =P2IN
  113 00000094         ; LDRB r1, [r0]
  114 00000094         ; TST r1, OLAmask
  115 00000094         ; BNE stateB
  116 00000094         
  117 00000094         ; flash yellow
  118 00000094 F000 F842       BL               greenOFF
  119 00000098 F000 F85C       BL               redOFF
  120 0000009C F000 F846       BL               yellowON
  121 000000A0         
  122 000000A0 4839            LDR              R0, =500000
  123 000000A2 F000 F832       BL               delayMs
  124 000000A6         
  125 000000A6 F000 F847       BL               yellowOFF
  126 000000AA         
  127 000000AA 4837            LDR              R0, =500000
  128 000000AC F000 F82D       BL               delayMs
  129 000000B0         
  130 000000B0 E7E6            B                stateC
  131 000000B2         ;-------------------------------------------------------
                       ------------------------
  132 000000B2         stateD
  133 000000B2         ; to get to stateE
  134 000000B2 4836            LDR              r0, =P2IN
  135 000000B4 7801            LDRB             r1, [r0]
  136 000000B6 F011 0F80       TST              r1, OLAmask
  137 000000BA D006            BEQ              stateE
  138 000000BC         
  139 000000BC F000 F82E       BL               greenOFF
  140 000000C0 F000 F848       BL               redOFF
  141 000000C4 F000 F832       BL               yellowON
  142 000000C8         
  143 000000C8 E7F3            B                stateD
  144 000000CA         ;-------------------------------------------------------
                       ------------------------
  145 000000CA         stateE
  146 000000CA         ; to get to stateF
  147 000000CA 482E            LDR              r0, =P1IN
  148 000000CC 7801            LDRB             r1, [r0]
  149 000000CE F011 0F10       TST              r1, ACKmask
  150 000000D2 D00E            BEQ              stateF
  151 000000D4         
  152 000000D4 F000 F822       BL               greenOFF
  153 000000D8 F000 F82E       BL               yellowOFF



ARM Macro Assembler    Page 4 


  154 000000DC F000 F834       BL               redON
  155 000000E0         
  156 000000E0 4829            LDR              R0, =500000
  157 000000E2 F000 F812       BL               delayMs
  158 000000E6         
  159 000000E6 F000 F835       BL               redOFF
  160 000000EA         
  161 000000EA 4827            LDR              R0, =500000
  162 000000EC F000 F80D       BL               delayMs
  163 000000F0         
  164 000000F0 E7EB            B                stateE
  165 000000F2         ;-------------------------------------------------------
                       ------------------------
  166 000000F2         stateF
  167 000000F2         ; to get to stateD
  168 000000F2 4826            LDR              r0, =P2IN
  169 000000F4 7801            LDRB             r1, [r0]
  170 000000F6 F011 0F80       TST              r1, OLAmask
  171 000000FA D1DA            BNE              stateD
  172 000000FC         
  173 000000FC F000 F80E       BL               greenOFF
  174 00000100 F000 F81A       BL               yellowOFF
  175 00000104 F000 F820       BL               redON
  176 00000108         
  177 00000108 E7F3            B                stateF
  178 0000010A         ; ------------------------------------------------------
                       ------------------------
  179 0000010A         ; SUBROUTINES
  180 0000010A         ; ------------------------------------------------------
                       ------------------------
  181 0000010A         delayMs
  182 0000010A         
  183 0000010A 3801    L1      SUBS             R0, #1      ; inner loop
  184 0000010C D1FD            BNE              L1
  185 0000010E 4770            BX               LR
  186 00000110         
  187 00000110         greenON
  188 00000110 481B            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
  189 00000112 7801            LDRB             R1, [R0]
  190 00000114 F041 0102       ORR              R1, #2      ; set bit 0
  191 00000118 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  192 0000011A 4770            BX               LR
  193 0000011C         
  194 0000011C         greenOFF
  195 0000011C 4818            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
  196 0000011E 7801            LDRB             R1, [R0]
  197 00000120 F06F 0202       MVN              R2, #2      ; load complement o
                                                            f bit 0 mask
  198 00000124 EA01 0102       AND              R1, R2      ; clear bit 0
  199 00000128 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  200 0000012A 4770            BX               LR
  201 0000012C         
  202 0000012C         yellowON
  203 0000012C 4814            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1



ARM Macro Assembler    Page 5 


  204 0000012E 7801            LDRB             R1, [R0]
  205 00000130 F041 0110       ORR              R1, YELLOWmask
  206 00000134 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  207 00000136 4770            BX               LR
  208 00000138         
  209 00000138         yellowOFF
  210 00000138 4811            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
  211 0000013A 7801            LDRB             R1, [R0]
  212 0000013C F06F 0210       MVN              R2, YELLOWmask ; load complemen
                                                            t of bit 0 mask
  213 00000140 EA01 0102       AND              R1, R2      ; clear bit 0
  214 00000144 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  215 00000146 4770            BX               LR
  216 00000148         
  217 00000148         redON
  218 00000148 4811            LDR              R0, =P1OUT  ; load Output Data 
                                                            Reg in R1
  219 0000014A 7801            LDRB             R1, [R0]
  220 0000014C F041 0101       ORR              R1, #1      ; set bit 0
  221 00000150 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  222 00000152 4770            BX               LR
  223 00000154         
  224 00000154         redOFF
  225 00000154 480E            LDR              R0, =P1OUT  ; load Output Data 
                                                            Reg in R1
  226 00000156 7801            LDRB             R1, [R0]
  227 00000158 F06F 0201       MVN              R2, #1      ; load complement o
                                                            f bit 0 mask
  228 0000015C EA01 0102       AND              R1, R2      ; clear bit 0
  229 00000160 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  230 00000162 4770            BX               LR
  231 00000164         
  232 00000164         allOFF
  233 00000164 4806            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
  234 00000166 7801            LDRB             R1, [R0]
  235 00000168 F06F 0207       MVN              R2, #7      ; load complement o
                                                            f bit 0 mask
  236 0000016C EA01 0102       AND              R1, R2      ; clear bit 0
  237 00000170 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  238 00000172 4770            BX               LR
  239 00000174         
  240 00000174                 END
              40004C05 
              40004C04 
              40004C07 
              40004C03 
              40004C00 
              0007A120 
              40004C01 
              40004C02 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\asm_main.d -o.\objects\asm_main.o -I.\RTE\_Target_1 -



ARM Macro Assembler    Page 6 


IC:\Users\fssoh\AppData\Local\Arm\Packs\ARM\CMSIS\5.6.0\CMSIS\Core\Include -IC:
\Users\fssoh\AppData\Local\Arm\Packs\TexasInstruments\MSP432P4xx_DFP\3.2.6\Devi
ce\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 528"
 --predefine="_RTE_ SETA 1" --predefine="__MSP432P401R__ SETA 1" --list=.\listi
ngs\asm_main.lst asm_main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 23 in file asm_main.s
   Uses
      None
Comment: .text unused
L1 0000010A

Symbol: L1
   Definitions
      At line 183 in file asm_main.s
   Uses
      At line 184 in file asm_main.s
Comment: L1 used once
allOFF 00000164

Symbol: allOFF
   Definitions
      At line 232 in file asm_main.s
   Uses
      At line 48 in file asm_main.s
Comment: allOFF used once
asm_main 00000000

Symbol: asm_main
   Definitions
      At line 26 in file asm_main.s
   Uses
      At line 24 in file asm_main.s
Comment: asm_main used once
delayMs 0000010A

Symbol: delayMs
   Definitions
      At line 181 in file asm_main.s
   Uses
      At line 69 in file asm_main.s
      At line 75 in file asm_main.s
      At line 123 in file asm_main.s
      At line 128 in file asm_main.s
      At line 157 in file asm_main.s
      At line 162 in file asm_main.s

greenOFF 0000011C

Symbol: greenOFF
   Definitions
      At line 194 in file asm_main.s
   Uses
      At line 118 in file asm_main.s
      At line 139 in file asm_main.s
      At line 152 in file asm_main.s
      At line 173 in file asm_main.s

greenON 00000110

Symbol: greenON



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 187 in file asm_main.s
   Uses
      At line 64 in file asm_main.s
      At line 80 in file asm_main.s

loop 00000028

Symbol: loop
   Definitions
      At line 47 in file asm_main.s
   Uses
      At line 53 in file asm_main.s
Comment: loop used once
redOFF 00000154

Symbol: redOFF
   Definitions
      At line 224 in file asm_main.s
   Uses
      At line 72 in file asm_main.s
      At line 82 in file asm_main.s
      At line 119 in file asm_main.s
      At line 140 in file asm_main.s
      At line 159 in file asm_main.s

redON 00000148

Symbol: redON
   Definitions
      At line 217 in file asm_main.s
   Uses
      At line 66 in file asm_main.s
      At line 154 in file asm_main.s
      At line 175 in file asm_main.s

stateA 00000032

Symbol: stateA
   Definitions
      At line 57 in file asm_main.s
   Uses
      At line 77 in file asm_main.s
      At line 94 in file asm_main.s

stateB 0000005E

Symbol: stateB
   Definitions
      At line 79 in file asm_main.s
   Uses
      At line 51 in file asm_main.s
      At line 62 in file asm_main.s
      At line 96 in file asm_main.s

stateC 00000080

Symbol: stateC
   Definitions



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

      At line 98 in file asm_main.s
   Uses
      At line 88 in file asm_main.s
      At line 130 in file asm_main.s

stateD 000000B2

Symbol: stateD
   Definitions
      At line 132 in file asm_main.s
   Uses
      At line 109 in file asm_main.s
      At line 143 in file asm_main.s
      At line 171 in file asm_main.s

stateE 000000CA

Symbol: stateE
   Definitions
      At line 145 in file asm_main.s
   Uses
      At line 103 in file asm_main.s
      At line 137 in file asm_main.s
      At line 164 in file asm_main.s

stateF 000000F2

Symbol: stateF
   Definitions
      At line 166 in file asm_main.s
   Uses
      At line 150 in file asm_main.s
      At line 177 in file asm_main.s

yellowOFF 00000138

Symbol: yellowOFF
   Definitions
      At line 209 in file asm_main.s
   Uses
      At line 71 in file asm_main.s
      At line 81 in file asm_main.s
      At line 125 in file asm_main.s
      At line 153 in file asm_main.s
      At line 174 in file asm_main.s

yellowON 0000012C

Symbol: yellowON
   Definitions
      At line 202 in file asm_main.s
   Uses
      At line 65 in file asm_main.s
      At line 120 in file asm_main.s
      At line 141 in file asm_main.s

18 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

ACKmask 00000010

Symbol: ACKmask
   Definitions
      At line 16 in file asm_main.s
   Uses
      At line 108 in file asm_main.s
      At line 149 in file asm_main.s

FLAmask 00000040

Symbol: FLAmask
   Definitions
      At line 17 in file asm_main.s
   Uses
      At line 39 in file asm_main.s
      At line 44 in file asm_main.s
      At line 87 in file asm_main.s

OLAmask 00000080

Symbol: OLAmask
   Definitions
      At line 18 in file asm_main.s
   Uses
      At line 102 in file asm_main.s
      At line 136 in file asm_main.s
      At line 170 in file asm_main.s

P1DIR 40004C04

Symbol: P1DIR
   Definitions
      At line 2 in file asm_main.s
   Uses
      At line 32 in file asm_main.s
Comment: P1DIR used once
P1IN 40004C00

Symbol: P1IN
   Definitions
      At line 5 in file asm_main.s
   Uses
      At line 59 in file asm_main.s
      At line 91 in file asm_main.s
      At line 106 in file asm_main.s
      At line 147 in file asm_main.s

P1OUT 40004C02

Symbol: P1OUT
   Definitions
      At line 4 in file asm_main.s
   Uses
      At line 218 in file asm_main.s
      At line 225 in file asm_main.s

P1REN 40004C06




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Symbol: P1REN
   Definitions
      At line 6 in file asm_main.s
   Uses
      None
Comment: P1REN unused
P2DIR 40004C05

Symbol: P2DIR
   Definitions
      At line 9 in file asm_main.s
   Uses
      At line 27 in file asm_main.s
Comment: P2DIR used once
P2IN 40004C01

Symbol: P2IN
   Definitions
      At line 11 in file asm_main.s
   Uses
      At line 85 in file asm_main.s
      At line 100 in file asm_main.s
      At line 134 in file asm_main.s
      At line 168 in file asm_main.s

P2OUT 40004C03

Symbol: P2OUT
   Definitions
      At line 10 in file asm_main.s
   Uses
      At line 42 in file asm_main.s
      At line 188 in file asm_main.s
      At line 195 in file asm_main.s
      At line 203 in file asm_main.s
      At line 210 in file asm_main.s
      At line 233 in file asm_main.s

P2REN 40004C07

Symbol: P2REN
   Definitions
      At line 8 in file asm_main.s
   Uses
      At line 37 in file asm_main.s
Comment: P2REN used once
TSTmask 00000002

Symbol: TSTmask
   Definitions
      At line 15 in file asm_main.s
   Uses
      At line 61 in file asm_main.s
      At line 93 in file asm_main.s

YELLOWmask 00000010

Symbol: YELLOWmask
   Definitions



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

      At line 13 in file asm_main.s
   Uses
      At line 205 in file asm_main.s
      At line 212 in file asm_main.s

13 symbols
368 symbols in table
